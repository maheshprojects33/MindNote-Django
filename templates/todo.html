{% extends 'base.html' %}


{% block content %}

<div class="container mt-5">

    <div class="row">
        <div class="col-md-10 offset-md-1">
            {% if messages %}
            <div class="alert alert-danger" role="alert">
                {% for message in messages %}
                {{message}}
                {% endfor %}
            </div>
            {% endif %}
            <div class="card p-3 dark-bg">
                <h2 class="mb-3">To-Do List</h2>
                <form action="{% url 'todo-add' %}" method="POST">
                    {% csrf_token %}
                    <div class="form-group row mb-3">
                        <div class="col-md-6">
                            <input type="text" class="form-control" placeholder="Enter Your Task Here..." name="todo"
                                required>
                        </div>
                        <div class="col-md-3" style="padding-left: 10px;padding-right: 10px;">
                            <input type="date" class="form-control" placeholder="Starts At" name="start">
                        </div>
                        <div class="col-md-3" style="padding-left: 10px;padding-right: 10px;">
                            <input type="date" class="form-control" placeholder="Deadline" name="deadline">
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary mb-3">Add Item</button>


                </form>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <h5>Task</h5>
                    </div>
                    <div class="col-md-2">
                        <h5>Starts At</h5>
                    </div>
                    <div class="col-md-2">
                        <h5>Deadline</h5>
                    </div>
                    <div class="col-md-2">
                        <h5>Action</h5>
                    </div>


                </div>


                <div class="row">
                    <div class="col-md-6">

                        <form method="POST" action="/todo-complete/">
                            {% csrf_token %}
                            {% for checked in todo_display reversed %}
                            <div class="form-check mb-3">

                                <input class="form-check-input" type="checkbox" value="{{ checked.id }}"
                                    id="checked_{{ checked.id }}" name="checked_todos">

                                <label class="form-check-label" for="checked_{{ checked.id }}">
                                    {% if checked.is_completed %}
                                    <del style="color: red; font-style: italic;">{{ checked.todo }}</del>
                                    {% else %}
                                    {{ checked.todo }}
                                    {% endif %}
                                </label>
                            </div>
                            {% endfor %}

                            <button type="submit" class="btn btn-danger btn-block col-md-8">Mark As Completed/Incomplete</button>

                        </form>

                    </div>
                    <div class="col-md-2">
                        {% for starts in todo_display reversed %}
                        <p>{{starts.start}}</p>
                        {% endfor %}
                    </div>
                    <div class="col-md-2">
                        {% for deadlines in todo_display reversed %}
                        <p>{{deadlines.deadline}}</p>
                        {% endfor %}
                    </div>

                    <div class="col-md-2">
                        {% for todos in todo_display reversed %}
                        <p>
                            <a href="{% url 'todo-edit' todos.pk %}"><i>Edit</i></a />
                            |
                            <a href="{%url 'todo-delete' todos.pk %}"><i class="flaticon-garbage">Delete</i></a>
                        </p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>



{% endblock content %}